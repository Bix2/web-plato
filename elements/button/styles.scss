// --------------------------------------------------------- button styles

$button-color-primary: $primary-color !default;
$button-color-primary-contrast: $primary-contrast !default;
$button-color-secondary: $secondary-color !default;
$button-color-secondary-contrast: $secondary-contrast !default;
$button-color-danger: $danger-color !default;
$button-color-danger-contrast: $danger-contrast !default;
$button-color-success: $success-color !default;
$button-color-success-contrast: $success-contrast !default;
$button-color-warning: $warning-color !default;
$button-color-warning-contrast: $warning-contrast !default;

// backgrounds 
$button-color-background-outline: rgba(0, 0, 0, 0) !default;
$button-color-background-outline-primary: $button-color-background-outline !default;
$button-color-background-outline-secondary: $button-color-background-outline !default;
$button-color-background-outline-danger: $button-color-background-outline !default;
$button-color-background-outline-success: $button-color-background-outline !default;
$button-color-background-outline-warning: $button-color-background-outline !default;

$button-color-background-ghost: rgba(0, 0, 0, 0) !default;
$button-color-background-ghost-primary: $button-color-background-ghost !default;
$button-color-background-ghost-secondary: $button-color-background-ghost !default;
$button-color-background-ghost-danger: $button-color-background-ghost !default;
$button-color-background-ghost-success: $button-color-background-ghost !default;
$button-color-background-ghost-warning: $button-color-background-ghost !default;



// TODO : a-button colors

$button-color-map: (
	primary: (
		color: $button-color-primary,
		contrast: $button-color-primary-contrast,
		background: (
			regular: $button-color-primary,
			outline: $button-color-background-outline-primary,
			ghost: $button-color-background-ghost-primary
		)
	),
	secondary: (
		color: $button-color-secondary,
		contrast: $button-color-secondary-contrast,
		background: (
			regular: $button-color-secondary,
			outline: $button-color-background-outline-secondary,
			ghost: $button-color-background-ghost-secondary
		)
	),
	danger: (
		color: $button-color-danger,
		contrast: $button-color-danger-contrast,
		background: (
			regular: $button-color-danger,
			outline: $button-color-background-outline-danger,
			ghost: $button-color-background-ghost-danger
		)
	),
	success: (
		color: $button-color-success,
		contrast: $button-color-success-contrast,
		background: (
			regular: $button-color-success,
			outline: $button-color-background-outline-success,
			ghost: $button-color-background-ghost-success
		)
	),
	warning: (
		color: $button-color-warning,
		contrast: $button-color-warning-contrast,
		background: (
			regular: $button-color-warning,
			outline: $button-color-background-outline-warning,
			ghost: $button-color-background-ghost-warning
		)
	)
) !default;

@function button-color-map-get-color($color, $variant) {
	@if map-has-key($map: $button-color-map, $key: $color) {
		$color-map: map-get($map: $button-color-map, $key: $color);
		@if map-has-key($map: $color-map, $key: $variant) {
			$color-variant: map-get($map: $color-map, $key: $variant);
			@return $color-variant;
		}
		@else {
			@error "Requested variant '#{$variant}' is not available for color '#{$color}'.";
			@return null;
		}
	}
	@else {
		@error "Requested color '#{$color}' is not available.";
		@return null;
	}
}

@function button-color-map-get-color-for-style($color, $variant, $style) {
	$variant-styles: button-color-map-get-color($color, $variant);
	@if map-has-key($map: $variant-styles, $key: $style) {
		$style-color: map-get($map: $variant-styles, $key: $style);
		@return $style-color;
	}
	@else {
		@error "Requested style '#{$style}' is not available.";
		@return null;
	}
}

@mixin button-generator($color: "primary", $style: "regular", $size: "normal", $options: ("round": false, "square": false, "full": false, "has-icon": false, "has-icon-right": false)) {
	$color-color: button-color-map-get-color($color, "color");
	$color-contrast: button-color-map-get-color($color, "contrast");
	$color-background: button-color-map-get-color-for-style($color, "background", $style);
	color: $color-contrast;
	@include button-background($color-background);
	@include button-base;
	
	// style
	@if $style == "outline" {
		@include button-outline($color-color);
	}
	@else if $style == "ghost" {
		@include button-ghost($color-color);
	}
	@else if $style == "regular" {
		// do nothing
	}
	@else if $style != null {
		@error "The requested style '#{$style}' is not available.";
	}
	
	// size 
	@if $size == "small" {
		@include button-small;
	}
	@else if $size == "large" {
		@include button-large;
	}
	@else if $size == "normal" {
		// do nothing
	}
	@else if $size != null {
		@error "The requested size '#{$size}' is not available.";
	}
	
	// options 
	/// options - has-icon 
	@if map-get($options, "has-icon") == true {
		@include button-options-has-icon;
	}
	@else if map-get($options, "has-icon-right") == true {
		@include button-options-has-icon-right;
	}
	/// options - full
	@if map-get($options, "full") == true {
		@include button-options-full;
	}
}

button, .button, %button {
	&.primary {
		@include button-generator($color: "primary");
	}
	&.primary.outline {
		@include button-generator($color: "primary", $style: "outline");
	}
	&.primary.ghost {
		@include button-generator($color: "primary", $style: "ghost");
	}
	&.secondary {
		@include button-generator($color: "secondary");
	}
	&.secondary.outline {
		@include button-generator($color: "secondary", $style: "outline");
	}
	&.secondary.ghost {
		@include button-generator($color: "secondary", $style: "ghost");
	}
	&.danger {
		@include button-generator($color: "danger");
	}
	&.danger.outline {
		@include button-generator($color: "danger", $style: "outline");
	}
	&.danger.ghost {
		@include button-generator($color: "danger", $style: "ghost");
	}
	&.success {
		@include button-generator($color: "success");
	}
	&.success.outline {
		@include button-generator($color: "success", $style: "outline");
	}
	&.success.ghost {
		@include button-generator($color: "success", $style: "ghost");
	}
	&.warning {
		@include button-generator($color: "warning");
	}
	&.warning.outline {
		@include button-generator($color: "warning", $style: "outline");
	}
	&.warning.ghost {
		@include button-generator($color: "warning", $style: "ghost");
	}
}

.button, %button {
	@include button-base;
	// an icon is assumed on the left
	.icon, .fa {
		margin-right: 0.5rem;
	}
	&.has-icon-right {
		.icon, .fa {
			margin-right: 0;
			margin-left: 0.5rem;
		}
	}
	&.has-icon, &.has-icon-left {
		.icon, .fa {
			margin-right: 0.5rem;
		}
	}
}

a.button, %a-button {
	@include button-ghost($neutral-color);
	@include button-base;
	line-height: $button-height;
	text-transform: inherit;
	&.primary {
		@include button-ghost($primary-color);
	}
	&:hover {
		background-color: transparent;
	}
}